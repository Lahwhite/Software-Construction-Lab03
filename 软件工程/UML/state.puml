@startuml 状态图
' 状态图配置
skinparam state {
  BackgroundColor #F0F8FF
  BorderColor #666666
  FontName 微软雅黑
}

' 初始状态与终止状态
[*] --> 待录入 : 初始化记录对象

' 核心状态及转换
state 待录入 {
  [*] --> 编辑中
  编辑中 --> 本地保存成功 : 用户点击"保存"按钮
  编辑中 --> 待录入 : 用户取消编辑
}

本地保存成功 --> 未同步 : 记录存入本地数据库（isSynced=false）
未同步 --> 同步中 : 检测到网络连接，触发同步
同步中 --> 已同步 : 云端确认接收（isSynced=true）
同步中 --> 冲突状态 : 本地与云端记录版本不一致

冲突状态 --> 未同步 : 用户选择"以本地为准"
冲突状态 --> 已同步 : 用户选择"以云端为准"

已同步 --> 本地修改 : 用户编辑已同步记录（isSynced=false）
本地修改 --> 未同步 : 保存修改后

' 终止状态
未同步 --> [*] : 记录被删除（本地+云端）
已同步 --> [*] : 记录被删除（本地+云端）
@enduml